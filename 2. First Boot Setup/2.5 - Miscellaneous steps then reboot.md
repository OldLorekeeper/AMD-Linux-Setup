## 2.5.1 - Add US locale

```
kate /etc/locale.gen
```

Uncomment relevant entry:

`#en_US.UTF-8`

Generate locale:
exectuableexectuable
```
sudo locale-gen
```

<br/>
 
## 2.5.2 - Add environment variables

```
kate /etc/environment
```

Add the following

```
LIBVA_DRIVER_NAME=radeonsi
VDPAU_DRIVER=radeonsi
WINEFSYNC=1
```

<br/>
 
## 2.5.3 - Add kernel parameters

```
kate /etc/default/grub
```

Add following to GRUB_CMDLINE_LINUX_DEFAULT:
###### DESKTOP

```
amdgpu.ppfeaturemask=0xffffffff hugepages=512 video=2560x1600@60 amd_pstate=guided
```

###### LAPTOP

```
amdgpu.ppfeaturemask=0xffffffff hugepages=512 video=2560x1600@60 amd_pstate=active
```

<br/>
 
## 2.5.4 - Configure zram swap

```
kate /etc/systemd/zram-generator.conf
```

Replace with the following:

```
[zram0]
zram-size = ram / 2
compression-algorithm = zstd
swap-priority = 100
```

<br/>
 
## 2.5.5 - Add pacman hooks

Create a hook to rebuild the initramfs if microcode, btrfs, or firmware packages are updated:

```
sudo tee /etc/pacman.d/hooks/98-rebuild-initramfs.hook > /dev/null <<EOF
[Trigger]
Operation = Install
Operation = Upgrade
Type = Package
Target = amd-ucode
Target = btrfs-progs
Target = mkinitcpio-firmware

[Action]
Description = Rebuilding initramfs for critical package updates...
When = PostTransaction
Exec = /usr/bin/mkinitcpio -P
EOF
```

Create a second hook to update GRUB only when the linux-zen kernel changes:

```
sudo tee /etc/pacman.d/hooks/99-update-grub.hook > /dev/null <<EOF
[Trigger]
Operation = Install
Operation = Upgrade
Operation = Remove
Type = Package
Target = linux-zen

[Action]
Description = Updating GRUB configuration...
When = PostTransaction
Exec = /usr/bin/grub-mkconfig -o /boot/grub/grub.cfg
EOF
```

<br/>
 
## 2.5.6 - Change papirus dark's folder colours to Breeze

```
papirus-folders -C breeze --theme Papirus-Dark
```

<br/>
 
## 2.5.7 - Install and enable ktile

`https://github.com/51n7/kTile?tab=readme-ov-file`

KDE shortcuts:

```
Ktile 1 (small): meta+’
Ktile 2 (wide): meta+#
Ktile 3 (tall): meta+/
```

<br/>
 
 2.5.8 - Enable experimental Bluetooth features

```
kate /etc/bluetooth/main.conf
```

Uncomment and change line to:

`Experimental = true`

<br/>
 
## 2.5.9 - Remove certain KDE discover package

`sudo pacman -D --asexplicit [replace with non-optionalpackages at https://archlinux.org/packages/extra/any/plasma-meta/]`

```
yay -R plasma-meta
```

```
yay -R discover
```

<br/>
 
## 2.5.10 - Setup obsidian

```
git config --global credential.helper libsecret
```

```
cd Obsidian
```

```
git clone https://github.com/OldLorekeeper/[Insert_repo_here]

> Enter username
> Enter PAT
```

```
git config --global user.email "[user_email]"
```

Open Obsidian and select cloned repo folder as existing vault

<br/>
 
## 2.5.11 - Create krunner icon for plasma panel

```
mkdir -p ~/.local/share/plasma_icons && tee ~/.local/share/plasma_icons/krunner.desktop > /dev/null << 'EOF'
[Desktop Entry]
Exec=krunner
Icon=search
Name=KRunner
StartupNotify=false
Terminal=false
Type=Application
EOF

curl -s -L -o ~/.local/share/icons/search.svg "https://raw.githubusercontent.com/OldLorekeeper/AMD-Linux-Setup/refs/heads/main/5.%20Resources/Icons/Miscellaneous/search.svg"
```

<br/>
 
## 2.5.12 - Add Gemini plasmoid

Install:

```
git clone https://github.com/samirgaire10/com.samirgaire10.google_gemini-plasma6.git && mkdir -p ~/.local/share/plasma/plasmoids/ && mv ~/Make/com.samirgaire10.google_gemini-plasma6 ~/.local/share/plasma/plasmoids/
```

Add delay to startup and clipboard permissions:

```
# Define file path
QML_FILE="$HOME/.local/share/plasma/plasmoids/com.samirgaire10.google_gemini-plasma6/contents/ui/main.qml"

# 1. Fix startup delay (replaces Component.onCompleted line with a 3-sec timer)
sed -i '/Component.onCompleted: url = plasmoid.configuration.url;/c\
                Timer {\
                    id: startupTimer\
                    interval: 3000 // 3-second delay\
                    repeat: false\
                    onTriggered: geminiwebview.url = plasmoid.configuration.url\
                }\
\
                Component.onCompleted: startupTimer.start()' "$QML_FILE"

# 2. Fix clipboard access (adds permission handler after profile)
sed -i '/profile: geminiProfile/a \
\
                // --- Handle Clipboard Permission Request ---\
                onFeaturePermissionRequested: {\
                    if (feature === WebEngineView.ClipboardReadWrite) {\
                        geminiwebview.grantFeaturePermission(securityOrigin, feature, true);\
                    } else {\
                        geminiwebview.grantFeaturePermission(securityOrigin, feature, false);\
                    }\
                }\
                // --- End Permission Handler ---' "$QML_FILE"
```

Repo: https://github.com/samirgaire10/com.samirgaire10.google_gemini-plasma6

<br/>
 
## 2.5.13 - Delay Steam autostart and launch in system tray only

Create executable script:

```
echo -e '#!/bin/bash\nsleep 15\n/usr/bin/steam -silent "$@"' > ~/Make/steam-delay.sh && chmod +x ~/Make/steam-delay.sh
```

Open System Settings and add Steam to autostart:

```
Autostart >> Add new >> Application >> Games >> Steam >> OK
```

Edit Steam Autostart entry to launch steam-delay.sh:

```
Click 'properties' menu >> Application
> Program: ~/Make/steam-delay.sh
> Arguments: %U
```

<sup>Note: From experience, if Steam starts too early then the browser elements won't connect to the network properly and will return error codes</sup>

<br/>

## 2.5.14 – Configure Reflector Service and Timer

Edit reflector default settings:

```
kate /etc/xdg/reflector/reflector.conf
```

Comment out active lines and add following to document (Target top European countries for low latency + global fallback):

```
--latest 20
--age 12
--protocol https
--country GB,IE,NL,DE,FR,EU
--sort rate
--save /etc/pacman.d/mirrorlist
```

Edit timer unit:

```
sudo systemctl edit reflector.timer
```

Add following between ### sections:

```
[Timer]
# clear any existing calendar from the unit
OnCalendar=
# run at 00:00, 03:00, 06:00, ... 21:00
OnCalendar=00/3:00:00
Persistent=true
RandomizedDelaySec=15m
```

Reload:

```
sudo systemctl daemon-reload
sudo systemctl enable --now reflector.timer
```

To refresh the mirrorlist immediately, start the service manually:

```
sudo systemctl start reflector.service
```

You can verify its status or last run time with:

```
systemctl status reflector.service
systemctl list-timers reflector.timer
```

<br/>

## 2.5.15 - Install Affinity software

https://github.com/ryzendew/AffinityOnLinux

<br/>

 
### [Desktop | Next ⇢](../3.%20Device%20Specific%20Configuration/3.1%20-%20Desktop.md)

### [Laptop | Next ⇢](../3.%20Device%20Specific%20Configuration/3.2%20-%20Laptop.md)
