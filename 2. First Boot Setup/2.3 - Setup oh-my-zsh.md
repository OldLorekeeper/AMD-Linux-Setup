## 2.3.1 - Install and symlink config files

Paste following command in terminal:

```
# Install oh-my-zsh for the primary user
sh -c "$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"

# Install oh-my-zsh for root user
sudo sh -c "$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"

# Remove default root files (if they exist)
sudo rm -f /root/.zshrc
sudo rm -rf /root/.oh-my-zsh

# Symlink the user's config for root
sudo ln -s $HOME/.oh-my-zsh /root/.oh-my-zsh
sudo ln -s $HOME/.zshrc /root/.zshrc
```
 
## 2.3.3 - Install plugins

Paste following command in terminal:

```
git clone https://github.com/zsh-users/zsh-autosuggestions ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-autosuggestions && \
git clone https://github.com/zsh-users/zsh-syntax-highlighting.git ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-syntax-highlighting && \
git clone https://github.com/MichaelAquilina/zsh-you-should-use.git ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/you-should-use

```

<br/>
 
## 2.3.4 - Automatically customise .zshrc

Paste following command in terminal:

```
# Set the correct plugin list
sed -i 's/^#plugins=(git)$/plugins=(git archlinux zsh-autosuggestions zsh-syntax-highlighting you-should-use)/' ~/.zshrc

# Add aliases and custom git function to the end of the file
echo -e "\n# --- Custom Aliases and Functions ---" >> ~/.zshrc
tee -a ~/.zshrc > /dev/null << 'EOF'

alias mkinit="sudo mkinitcpio -P"
alias mkgrub="sudo grub-mkconfig -o /boot/grub/grub.cfg"

function git() {
    if [[ "$EUID" -eq 0 ]]; then
        # If running as root (e.g., sudo git), use system git without modification
        command git "$@"
        return
    fi

    if [[ "$1" == "clone" && -n "$2" ]]; then
        target_dir=$(pwd)
        default_dir=~/Make

        # Clone into ~/Make if the current directory is $HOME
        if [[ "$target_dir" == "$HOME" ]]; then
            command git clone "$2" "$default_dir/$(basename "$2" .git)"
        else
            command git clone "$2"
        fi
    else
        command git "$@"
    fi
}
EOF
```

<sub> Note: shell function ensures `git clone` always clones repo to ~/Make folder, unless running as sudo </sub>

<br/>
 
### [Next â‡¢](2.4%20-%20Install%20yay%20and%20packages.md)
