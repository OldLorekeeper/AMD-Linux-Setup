# 1. Clone Repositories

cd ~/Obsidian

# Clone AMD-Linux-Setup and initialize Secrets submodule
git clone https://github.com/OldLorekeeper/AMD-Linux-Setup.git
cd AMD-Linux-Setup
git submodule update --init --recursive

# 2. Restore Symlinks

# --- Global Gemini Config (~/.gemini) ---
mkdir -p ~/.gemini

# Link Global Configs from Secrets
ln -sf ~/Obsidian/AMD-Linux-Setup/Secrets/Gemini/global_GEMINI.md ~/.gemini/GEMINI.md
ln -sf ~/Obsidian/AMD-Linux-Setup/Secrets/Gemini/global_settings.json ~/.gemini/settings.json
ln -sf ~/Obsidian/AMD-Linux-Setup/Secrets/Gemini/global_trustedFolders.json ~/.gemini/trustedFolders.json

# Link Context-Specific GEMINI.md files to global folder for easy reference
ln -sf ~/Obsidian/AMD-Linux-Setup/Secrets/Gemini/arch_GEMINI.md ~/.gemini/arch_GEMINI.md
ln -sf ~/Obsidian/Privacy/GEMINI.md ~/.gemini/privacy_GEMINI.md

# --- Arch Repository Config (AMD-Linux-Setup) ---
cd ~/Obsidian/AMD-Linux-Setup

# Root level links
ln -sf Secrets/Gemini/arch_GEMINI.md GEMINI.md
ln -sf Secrets/Gemini/arch_geminiignore .geminiignore

# .gemini folder setup
mkdir -p .gemini/skills

# Settings link (using absolute path as per current setup)
ln -sf ~/Obsidian/AMD-Linux-Setup/Secrets/Gemini/arch_settings.json .gemini/settings.json

# Skill links (using relative paths)
ln -sf ../../Secrets/Gemini/arch_skills/arch-surgeon .gemini/skills/arch-surgeon
ln -sf ../../Secrets/Gemini/arch_skills/kde-architect .gemini/skills/kde-architect
ln -sf ../../Secrets/Gemini/arch_skills/code-governor .gemini/skills/code-governor
ln -sf ../../Secrets/Gemini/arch_skills/memory-concierge .gemini/skills/memory-concierge
